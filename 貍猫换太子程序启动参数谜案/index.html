<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>貍猫换太子？程序启动参数谜案 - 实用后端技术</title><meta name=Description content="实用后端技术"><meta property="og:title" content="貍猫换太子？程序启动参数谜案"><meta property="og:description" content="这几天在研究 Rancher 项目的源码，在准备开发环境的过程中发现其提供的 build 工具 dapper 输出帮助信息很奇怪，输出的程序名称竟然为 jetbrains-toolbo"><meta property="og:type" content="article"><meta property="og:url" content="https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/"><meta property="og:image" content="https://www.elonzh.com/logo.png"><meta property="article:published_time" content="2020-05-18T13:51:56+08:00"><meta property="article:modified_time" content="2020-05-18T13:51:56+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.elonzh.com/logo.png"><meta name=twitter:title content="貍猫换太子？程序启动参数谜案"><meta name=twitter:description content="这几天在研究 Rancher 项目的源码，在准备开发环境的过程中发现其提供的 build 工具 dapper 输出帮助信息很奇怪，输出的程序名称竟然为 jetbrains-toolbo"><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=https://www.elonzh.com/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.elonzh.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.elonzh.com/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=https://www.elonzh.com/apple-touch-icon.png><link rel=mask-icon href=https://www.elonzh.com/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=https://www.elonzh.com/site.webmanifest><link rel=canonical href=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/><link rel=prev href=https://www.elonzh.com/celery-%E6%98%AF%E5%A6%82%E4%BD%95%E8%B7%AF%E7%94%B1%E6%B6%88%E6%81%AF%E7%9A%84/><link rel=next href=https://www.elonzh.com/grpc-%E5%9C%A8-kubernetes-%E4%B8%AD%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/><link rel=stylesheet href=https://www.elonzh.com/lib/normalize/normalize.min.css><link rel=stylesheet href=https://www.elonzh.com/css/style.min.css><link rel=stylesheet href=https://www.elonzh.com/lib/fontawesome-free/all.min.css><link rel=stylesheet href=https://www.elonzh.com/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"貍猫换太子？程序启动参数谜案","inLanguage":"zh-cn","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.elonzh.com\/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88\/"},"genre":"posts","wordcount":1019,"url":"https:\/\/www.elonzh.com\/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88\/","datePublished":"2020-05-18T13:51:56+08:00","dateModified":"2020-05-18T13:51:56+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Elon Zhou"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=https://www.elonzh.com/ title=实用后端技术></a></div><div class=menu><div class=menu-inner><a class=menu-item href=https://www.elonzh.com/>首页 </a><a class=menu-item href=https://www.elonzh.com/posts/>文章 </a><a class=menu-item href=https://www.elonzh.com/tags/>标签 </a><a class=menu-item href=https://www.elonzh.com/categories/>分类 </a><a class=menu-item href=https://www.elonzh.com/snippet/>代码片 </a><a class=menu-item href=https://www.elonzh.com/about/>关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=https://www.elonzh.com/ title=实用后端技术></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=https://www.elonzh.com/>首页</a><a class=menu-item href=https://www.elonzh.com/posts/>文章</a><a class=menu-item href=https://www.elonzh.com/tags/>标签</a><a class=menu-item href=https://www.elonzh.com/categories/>分类</a><a class=menu-item href=https://www.elonzh.com/snippet/>代码片</a><a class=menu-item href=https://www.elonzh.com/about/>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">貍猫换太子？程序启动参数谜案</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://www.elonzh.com/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Elon Zhou</a></span>&nbsp;<span class=post-category>收录于 <a href=https://www.elonzh.com/categories/linux/><i class="far fa-folder fa-fw"></i>Linux</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-05-18>2020-05-18</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 1019 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 3 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#验证问题是否和启动参数有关>验证问题是否和启动参数有关</a></li><li><a href=#是谁改变了启动参数呢>是谁改变了启动参数呢</a></li><li><a href=#总结>总结</a></li><li><a href=#补充问题>补充问题</a></li></ul></nav></div></div><div class=content id=content><p>这几天在研究 Rancher 项目的源码，在准备开发环境的过程中发现其提供的 build 工具 dapper 输出帮助信息很奇怪，输出的程序名称竟然为 <code>jetbrains-toolbox</code>，第一反应是可能跟启动参数有关，随后开始了进一步调查。</p><p>在 IDEA 中显示的程序帮助：</p><p><img class=lazyload src=https://www.elonzh.com/svg/loading.min.svg data-src=img/2020-05-18-13-55-35.png data-srcset="https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-18-13-55-35.png, img/2020-05-18-13-55-35.png 1.5x, https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-18-13-55-35.png 2x" data-sizes=auto alt=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-18-13-55-35.png title=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-18-13-55-35.png></p><h2 id=验证问题是否和启动参数有关>验证问题是否和启动参数有关</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-makefile data-lang=makefile><span class=nf>.dapper</span><span class=o>:</span>
	@echo Downloading dapper
	@curl -sL https://releases.rancher.com/dapper/latest/dapper-<span class=sb>`</span>uname -s<span class=sb>`</span>-<span class=sb>`</span>uname -m<span class=sb>`</span> &gt; .dapper.tmp
	@@chmod +x .dapper.tmp
	@./.dapper.tmp -v
	@mv .dapper.tmp .dapper
</code></pre></td></tr></table></div></div><p>rancher 项目目录下生成的 <code>.dapper</code> 是在 Makefile 中下载下来的，并不是直接编译的，</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
   <span class=o>...</span>
	<span class=nx>app</span> <span class=o>:=</span> <span class=nx>cli</span><span class=p>.</span><span class=nf>NewApp</span><span class=p>()</span>
	<span class=nx>app</span><span class=p>.</span><span class=nx>Author</span> <span class=p>=</span> <span class=s>&#34;Rancher Labs&#34;</span>
	<span class=nx>app</span><span class=p>.</span><span class=nx>EnableBashCompletion</span> <span class=p>=</span> <span class=kc>true</span>
	<span class=nx>app</span><span class=p>.</span><span class=nx>Version</span> <span class=p>=</span> <span class=nx>VERSION</span>
   <span class=nx>app</span><span class=p>.</span><span class=nx>Usage</span> <span class=p>=</span> <span class=err>`</span><span class=nx>Docker</span> <span class=nx>build</span> <span class=nx>wrapper</span>
   <span class=o>...</span>
</code></pre></td></tr></table></div></div><p>dapper 使用 <a href=https://github.com/urfave/cli target=_blank rel="noopener noreffer">github.com/urfave/cli</a> 这个包作为应用框架，代码中没有明确指定应用名称，看来应该是框架处理的，</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>NewApp</span><span class=p>()</span> <span class=o>*</span><span class=nx>App</span> <span class=p>{</span>
	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>App</span><span class=p>{</span>
		<span class=nx>Name</span><span class=p>:</span>         <span class=nx>filepath</span><span class=p>.</span><span class=nf>Base</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>
		<span class=nx>HelpName</span><span class=p>:</span>     <span class=nx>filepath</span><span class=p>.</span><span class=nf>Base</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>
		<span class=nx>Usage</span><span class=p>:</span>        <span class=s>&#34;A new cli application&#34;</span><span class=p>,</span>
		<span class=o>...</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>果然，框架使用 <code>filepath.Base(os.Args[0])</code> 作为默认的应用名称，看来确实因为启动参数的问题导致的输出错误。</p><h2 id=是谁改变了启动参数呢>是谁改变了启动参数呢</h2><p>考虑到我是在 JetBrains Toolbox 启动的 IDEA，然后在 IDEA 启动的终端，可能是 JetBrains Toolbox 的某些环境变量一路传递到了终端里，我尝试着过滤了下可能的环境变量。</p><p><img class=lazyload src=https://www.elonzh.com/svg/loading.min.svg data-src=img/2020-05-19-10-08-37.png data-srcset="https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-10-08-37.png, img/2020-05-19-10-08-37.png 1.5x, https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-10-08-37.png 2x" data-sizes=auto alt=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-10-08-37.png title=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-10-08-37.png></p><p>出现了可疑的环境变量，其中 <code>APPIMAGE</code> 看上去是和 Linux 应用的打包格式 <a href=https://appimage.org/ target=_blank rel="noopener noreffer">AppImage</a> 有关系，但是这两个环境变量看上去和 <code>os.Args</code> 没有什么关系，从 <a href=https://docs.appimage.org/packaging-guide/environment-variables.html#type-2-appimage-runtime target=_blank rel="noopener noreffer">AppImage 文档</a> 中了解到 AppImage 运行时会设置几个环境变量，其中有一个 <code>ARGV0</code>：</p><blockquote><p>ARGV0</p><p>Name/path used to execute the script. This corresponds to the value you’d normally receive via the argv argument passed to your main method. Usually contains the filename or path to the AppImage, relative to the current working directory.</p></blockquote><p>看起来和它有关，把它删除掉看看有什么效果，</p><p><img class=lazyload src=https://www.elonzh.com/svg/loading.min.svg data-src=img/2020-05-19-11-38-37.png data-srcset="https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-11-38-37.png, img/2020-05-19-11-38-37.png 1.5x, https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-11-38-37.png 2x" data-sizes=auto alt=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-11-38-37.png title=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-11-38-37.png></p><p>输出正常了！那为什么 <code>ARGV0</code> 会影响到终端程序的启动参数呢，难道这是一个通用的环境变量吗？再次祭出谷歌大法，找到个一个问题：</p><p><a href=https://github.com/AppImage/AppImageKit/issues/852 target=_blank rel="noopener noreffer">Setting environmental variable ARGV0 cause some packed software malfunctioning #852</a></p><p>原来这是个已知问题，因为我使用的 shell 是 zsh，而 zsh 会使用 <code>ARGV0</code> 环境变量作为第一个参数执行程序。</p><p><a href=http://zsh.sourceforge.net/Doc/Release/Parameters.html#Parameters-Used-By-The-Shell>http://zsh.sourceforge.net/Doc/Release/Parameters.html#Parameters-Used-By-The-Shell</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-text data-lang=text>ARGV0
   If exported, its value is used as the argv[0] of external commands. Usually used in constructs like ‘ARGV0=emacs nethack’.
</code></pre></td></tr></table></div></div><p>到这里结论就很清晰了，将 IDEA 的默认 shell 改为 bash，<code>ARGV0</code> 仍然存在，但已经不会影响程序的输出了。</p><p><img class=lazyload src=https://www.elonzh.com/svg/loading.min.svg data-src=img/2020-05-19-11-51-15.png data-srcset="https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-11-51-15.png, img/2020-05-19-11-51-15.png 1.5x, https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-11-51-15.png 2x" data-sizes=auto alt=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-11-51-15.png title=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-11-51-15.png></p><p>等等！一般来说 <code>os.Args</code> 第一个参数就是程序的路径，难道可以允许和实际程序路径不一样？</p><p>这就得从 Linux 系统调用说起了，<code>os.Args[0]</code> 指代的是程序的名称，但这跟其他参数本质上没什么区别，并不要求一定是程序执行路径，具体信息可以参照下面两个链接，这里就不展开了。</p><ul><li><a href=https://unix.stackexchange.com/questions/315812/why-does-argv-include-the-program-name target=_blank rel="noopener noreffer">Why does argv include the program name?</a></li><li><a href=http://man7.org/linux/man-pages/man3/exec.3.html target=_blank rel="noopener noreffer">EXEC(3) man page</a></li></ul><h2 id=总结>总结</h2><ul><li>AppImage 运行时会设置 <code>ARGV0</code> 环境变量，而 jetbrains-toolbox 使用的是 AppImage 打包；</li><li>从 jetbrains-toolbox 启动 IDEA 会复制父进程的环境变量；</li><li>IDEA 使用的 shell 是 zsh，而 zsh 会使用 <code>ARGV0</code> 环境变量作为 <code>os.Args[0]</code>；</li><li><code>os.Args[0]</code> 是程序的名字，并不是必须的或者必须是实际程序路径。</li></ul><h2 id=补充问题>补充问题</h2><p>你们知道为什么当时过滤 jetbrains 环境变量为什么没有过滤出来 <code>ARGV0</code> 吗？</p><p>提示，在 bash 下是可以过滤出来的：</p><p><img class=lazyload src=https://www.elonzh.com/svg/loading.min.svg data-src=img/2020-05-19-13-25-45.png data-srcset="https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-13-25-45.png, img/2020-05-19-13-25-45.png 1.5x, https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-13-25-45.png 2x" data-sizes=auto alt=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-13-25-45.png title=/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/img/2020-05-19-13-25-45.png></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2020-05-18</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/ data-title=貍猫换太子？程序启动参数谜案><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/ data-title=貍猫换太子？程序启动参数谜案 data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/ data-title=貍猫换太子？程序启动参数谜案><i data-svg-src=https://www.elonzh.com/lib/simple-icons/icons/line.min.svg></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/ data-title=貍猫换太子？程序启动参数谜案><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="分享到 Myspace" data-sharer=myspace data-url=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/ data-title=貍猫换太子？程序启动参数谜案 data-description><i data-svg-src=https://www.elonzh.com/lib/simple-icons/icons/myspace.min.svg></i></a><a href=javascript:void(0); title="分享到 Blogger" data-sharer=blogger data-url=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/ data-title=貍猫换太子？程序启动参数谜案 data-description><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://www.elonzh.com/%E8%B2%8D%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%B0%9C%E6%A1%88/ data-title=貍猫换太子？程序启动参数谜案><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back();>返回</a></span>&nbsp;|&nbsp;<span><a href=https://www.elonzh.com/>主页</a></span></section></div><div class=post-nav><a href=https://www.elonzh.com/celery-%E6%98%AF%E5%A6%82%E4%BD%95%E8%B7%AF%E7%94%B1%E6%B6%88%E6%81%AF%E7%9A%84/ class=prev rel=prev title="Celery 是如何路由消息的"><i class="fas fa-angle-left fa-fw"></i>Celery 是如何路由消息的</a>
<a href=https://www.elonzh.com/grpc-%E5%9C%A8-kubernetes-%E4%B8%AD%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/ class=next rel=next title="gRPC 在 Kubernetes 中的负载均衡">gRPC 在 Kubernetes 中的负载均衡<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.68.3">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://www.elonzh.com/ target=_blank>Elon Zhou</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp>皖ICP备15003561号-2</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=https://www.elonzh.com/lib/katex/katex.min.css><link rel=stylesheet href=https://www.elonzh.com/lib/katex/copy-tex.min.css><link rel=stylesheet href=https://www.elonzh.com/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=https://elonzh.disqus.com/embed.js defer></script><script type=text/javascript src=https://www.elonzh.com/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/lunr/lunr.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/sharer/sharer.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/katex/katex.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/katex/auto-render.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/katex/copy-tex.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/katex/mhchem.min.js></script><script type=text/javascript src=https://www.elonzh.com/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":30},"comment":{},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type=text/javascript src=https://www.elonzh.com/js/theme.min.js></script></body></html>